(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31cc39aa"],{"159b":function(e,t,r){var a=r("da84"),n=r("fdbc"),o=r("17c2"),i=r("9112");for(var s in n){var l=a[s],c=l&&l.prototype;if(c&&c.forEach!==o)try{i(c,"forEach",o)}catch(u){c.forEach=o}}},"17c2":function(e,t,r){"use strict";var a=r("b727").forEach,n=r("a640"),o=r("ae40"),i=n("forEach"),s=o("forEach");e.exports=i&&s?[].forEach:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}},"194b":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"parking-add"},[r("VueForm",{ref:"vuForm",attrs:{formItem:e.form_item,form_handler:e.form_handler,formData:e.form},scopedSlots:e._u([{key:"maintain",fn:function(){return[r("el-row",[r("el-col",{attrs:{span:6}},[r("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.form.maintainDate,callback:function(t){e.$set(e.form,"maintainDate",t)},expression:"form.maintainDate"}})],1),r("el-col",{attrs:{span:6}},[e._v("下次保养日期：2020-11-11")])],1)]},proxy:!0},{key:"energy",fn:function(){return[r("el-radio-group",{on:{change:e.changeEnergyType},model:{value:e.form.energyType,callback:function(t){e.$set(e.form,"energyType",t)},expression:"form.energyType"}},e._l(e.energyType,(function(t){return r("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1),1==e.form.energyType||3==e.form.energyType?r("div",{staticClass:"progress-bar-wrap"},[r("span",{staticClass:"label-text"},[e._v("电量")]),r("el-row",[r("el-col",{attrs:{span:10}},[r("el-slider",{attrs:{"show-input":""},model:{value:e.form.electric,callback:function(t){e.$set(e.form,"electric",t)},expression:"form.electric"}})],1)],1)],1):e._e(),2==e.form.energyType||3==e.form.energyType?r("div",{staticClass:"progress-bar-wrap"},[r("span",{staticClass:"label-text"},[e._v("油量")]),r("el-row",[r("el-col",{attrs:{span:10}},[r("el-slider",{attrs:{"show-input":""},model:{value:e.form.oil,callback:function(t){e.$set(e.form,"oil",t)},expression:"form.oil"}})],1)],1)],1):e._e()]},proxy:!0},{key:"carsAttr",fn:function(){return[r("el-button",{attrs:{type:"primary"},on:{click:e.addCarsAttr}},[e._v("添加汽车属性")]),e._l(e.cars_attr,(function(t,a){return r("div",{key:t.key,staticClass:"cars-attr-list"},[r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:2}},[r("el-input",{model:{value:t.attr_key,callback:function(r){e.$set(t,"attr_key",r)},expression:"item.attr_key"}})],1),r("el-col",{attrs:{span:3}},[r("el-input",{model:{value:t.attr_value,callback:function(r){e.$set(t,"attr_value",r)},expression:"item.attr_value"}})],1),r("el-col",{attrs:{span:6}},[r("el-button",{on:{click:function(t){return e.delCarsAttr(a)}}},[e._v("删除")])],1)],1)],1)}))]},proxy:!0}])})],1)},n=[],o=(r("4de4"),r("4160"),r("caad"),r("a434"),r("b64b"),r("2532"),r("159b"),r("2934")),i=r("a8b5"),s=r("b6ee"),l={name:"CarsAdd",components:{VueForm:i["a"]},data:function(){var e=this;return{cars_attr:[],form_item:[{type:"select",label:"车辆品牌",placeholder:"请选择车辆品牌",prop:"carsBrandId",select_vlaue:"id",select_label:"nameCh",required:!0,options:[]},{type:"select",label:"停车场",placeholder:"请选择停车场",select_vlaue:"id",select_label:"parkingName",prop:"parkingId",required:!0,options:[]},{type:"input",label:"车辆型号",placeholder:"请输入车辆型号",required:!0,prop:"carsNumber"},{type:"input",label:"车牌号",placeholder:"请输入车牌号",required:!0,prop:"carsMode"},{type:"input",label:"车架号",placeholder:"请输入车架号",required:!0,prop:"carsFrameNumber"},{type:"input",label:"发动机号",placeholder:"请输入发动机号",required:!0,prop:"engineNumber"},{type:"upload",label:"缩略图",prop:"carsImg"},{type:"radio",label:"年检",placeholder:"请选择年检",prop:"yearCheck",options:this.$store.state.config.year_check},{type:"slot",slotName:"maintain",prop:"maintainDate",label:"保养日期"},{type:"radio",label:"档位",placeholder:"请选择档位",prop:"gear",options:this.$store.state.config.gear},{type:"slot",slotName:"energy",prop:"energyType",label:"能源类型"},{type:"radio",label:"禁启用",prop:"status",required:!0,options:this.$store.state.config.radio_disabled},{type:"slot",slotName:"carsAttr",prop:"carsAttr",label:"车辆属性"},{type:"wangeditor",prop:"content",label:"车辆描述"}],form_handler:[{label:"确定",type:"danger",handler:function(){return e.onSubmit()}},{label:"重置",type:""}],form:{parkingId:"",carsBrandId:"",carsMode:"",carsNumber:"",carsFrameNumber:"",engineNumber:"",yearCheck:!0,gear:1,energyType:1,electric:100,oil:100,carsAttr:"",content:"",maintainDate:"",status:!0,carsImg:""},carsBrandList:[],energyType:this.$store.state.config.energyType,id:this.$route.query.id,uploadData:{}}},beforeMount:function(){this.GetCarsBrandList(),this.GetParking()},mounted:function(){this.getDetail()},methods:{addCarsAttr:function(){this.cars_attr.push({attr_key:"",attr_value:""})},delCarsAttr:function(e){this.cars_attr.splice(e,1)},onSubmit:function(){var e=this;this.formatCarsAttr(),this.$refs.vuForm.$refs.form.validate((function(t){if(!t)return console.log("error submit!!"),!1;e.id?e.editCars():e.addCars()}))},GetCarsBrandList:function(){var e=this;Object(o["e"])().then((function(t){var r=t.data.data.data;if(r){var a=e.form_item.filter((function(e){return"carsBrandId"==e.prop}));a.length>0&&(a[0].options=r)}}))},GetParking:function(){var e=this;Object(o["f"])().then((function(t){var r=t.data.data.data;if(r){var a=e.form_item.filter((function(e){return"parkingId"==e.prop}));a.length>0&&(a[0].options=r)}}))},changeEnergyType:function(e){this.form.oil=0,this.form.electric=0},formatCarsAttr:function(){var e=this.cars_attr,t={};e&&0!=e.length&&(e.forEach((function(e){e.attr_key&&(t[e.attr_key]=e.attr_value)})),this.form.carsAttr=JSON.stringify(t))},addCars:function(){var e=this;Object(s["a"])(this.form).then((function(t){e.$message({message:t.data.message,type:"success"}),e.reset()}))},editCars:function(){var e=this,t=JSON.parse(JSON.stringify(this.form));t.id=this.id,this.btn_loading=!0,Object(s["c"])(t).then((function(t){e.btn_loading=!1,e.$message({message:t.data.message,type:"success"})}))},getDetail:function(){var e=this;if(this.id){var t={id:this.id};Object(s["b"])(t).then((function(t){var r=t.data.data;if(!r)return!1;for(var a in r)Object.keys(e.form).includes(a)&&(e.form[a]=r[a]);var n=JSON.parse(r.carsAttr),o=[];for(var i in n){var s={};s.attr_key=i,s.attr_value=n[i],o.push(s)}e.cars_attr=o}))}},reset:function(){this.$refs.vuForm.resetForm()}}},c=l,u=(r("497e"),r("2877")),f=Object(u["a"])(c,a,n,!1,null,null,null);t["default"]=f.exports},4160:function(e,t,r){"use strict";var a=r("23e7"),n=r("17c2");a({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},"497e":function(e,t,r){"use strict";var a=r("5b2a"),n=r.n(a);n.a},"4de4":function(e,t,r){"use strict";var a=r("23e7"),n=r("b727").filter,o=r("1dde"),i=r("ae40"),s=o("filter"),l=i("filter");a({target:"Array",proto:!0,forced:!s||!l},{filter:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},"5b2a":function(e,t,r){},a434:function(e,t,r){"use strict";var a=r("23e7"),n=r("23cb"),o=r("a691"),i=r("50c4"),s=r("7b0b"),l=r("65f0"),c=r("8418"),u=r("1dde"),f=r("ae40"),d=u("splice"),p=f("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,h=Math.min,y=9007199254740991,b="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!d||!p},{splice:function(e,t){var r,a,u,f,d,p,g=s(this),v=i(g.length),_=n(e,v),k=arguments.length;if(0===k?r=a=0:1===k?(r=0,a=v-_):(r=k-2,a=h(m(o(t),0),v-_)),v+r-a>y)throw TypeError(b);for(u=l(g,a),f=0;f<a;f++)d=_+f,d in g&&c(u,f,g[d]);if(u.length=a,r<a){for(f=_;f<v-a;f++)d=f+a,p=f+r,d in g?g[p]=g[d]:delete g[p];for(f=v;f>v-a+r;f--)delete g[f-1]}else if(r>a)for(f=v-a;f>_;f--)d=f+a-1,p=f+r-1,d in g?g[p]=g[d]:delete g[p];for(f=0;f<r;f++)g[f+_]=arguments[f+2];return g.length=v-a+r,u}})},b6ee:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return i})),r.d(t,"b",(function(){return s}));var a=r("b775");function n(e){return a["a"].request({method:"post",url:"/cars/add/",data:e})}function o(e){return a["a"].request({method:"post",url:"/cars/edit/",data:e})}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].request({method:"post",url:"/cars/status/",data:e})}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a["a"].request({method:"post",url:"/cars/detailed/",data:e})}}}]);